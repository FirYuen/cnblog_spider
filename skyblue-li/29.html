
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
</head>
<body>
<h2>
三分钟学会用 js + css3 打造酷炫3D相册
</h2>
<div class="blogpost-body cnblogs-markdown" id="cnblogs_post_body"><p>之前发过该文，后来不知怎么回事不见了，现在重新发一下。</p>
<p><strong>中秋主题的3D旋转相册</strong><br/>
<img src="https://upload-images.jianshu.io/upload_images/1929342-6b23841e4f9940ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>如图，这是通过Javascript和css3来实现的。整个案例只有不到80行代码，我希望通过这个案例，让正处于迷茫期的js初学者感受到学习的乐趣。我会尽可能讲得详细，不需要你对css和js有多么高深的理解，你也可以跟着一步步做出来。如果你是为了讨女票开心，那么也完全可以把图片换成对方的照片，在某个特别的时刻给对方一个惊喜哦 ~</p>
<p>css3的强大使得网页的展示变得空前得丰富起来，再配合简单的js代码，就可以实现这个效果。好了，话不多说，让我们开始吧。</p>
<h2 id="页面模板">1. 页面模板</h2>
<pre><code>&lt;!doctype html&gt;
&lt;html lang="en"&gt;
 &lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;中秋节快乐&lt;/title&gt;
  &lt;style&gt;
    
  &lt;/style&gt;
 &lt;/head&gt;
 &lt;body&gt;
  
 &lt;/body&gt;

 &lt;script&gt;

 &lt;/script&gt;
&lt;/html&gt;</code></pre>
<p>** 1.1 ** ：这句话的含义是，设置网页编码为utf-8，确保中文可以正常显示。</p>
<p><strong>1.2.</strong> ：设置网页的标题。</p>
<p>就是它：<br/>
<img src="https://upload-images.jianshu.io/upload_images/1929342-a1555b4318f2309e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p><strong>1.3.<style></style></strong> ： 在style里面可以编写css样式，所谓的css就是相当于给dom元素披上了一层美丽的外衣。</p>
<p><strong>1.4. </strong> ： 在body区域里面添加dom元素，也就是一个网页的主题框架。比如div，p，a标签等，就是放在这个部分的。</p>
<p><strong>1.5.</strong> ：这是js脚本区域，单纯的说，就是为了动态地控制body区域里面的标签元素。之所以放在body的下面，是为了保证浏览器先把所有的dom元素都渲染完毕，才进行js操作。</p>
<h5 id="调背景色">2.调背景色</h5>
<p>在style块里面给整个页面渲染成黑色调</p>
<pre><code>*{padding:0px;margin:0px;} /*这是为了消除默认dom元素的内外边距，使得我们写css的时候更精确*/
body{background:#000;}</code></pre>
<h2 id="是纯黑色">000是纯黑色</h2>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-79188e6063a9d7fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<h2 id="f00是纯红色">F00是纯红色</h2>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-5fa8504c84f3566f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<h2 id="f0是纯绿色">0F0是纯绿色</h2>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-0fee45130aaae61a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<h3 id="f是纯蓝色">00F是纯蓝色</h3>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-92caf27e494bac4c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>顺便提一下，#FFF肯定就是纯白色了。</p>
<p>在本案例中，我们将背景色设置为纯黑色。</p>
<h1 id="制作3d相框">3.制作3D相框</h1>
<p>我们我们画一个id为photos的div作为相框来装载所有的图片。</p>
<pre><code>&lt;div id="photos"&gt;&lt;/div&gt;</code></pre>
<p>这句话一写，页面上啥也没有，div连宽度和高度都没有，这个时候，我们就要用css来给div添加一件美丽的外衣了。</p>
<pre><code>#photos{
    width:110px;            /*宽度*/
    height:180px;          /*高度*/
    border:1px solid #ccc;  /*加一个灰色边框*/
    margin:160px auto;     /*水平居中，高度距离顶部100px*/
}</code></pre>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-c0fe61eb0d232a77.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>这样还是平面的效果，没有3D的感觉，如果你不相信，我们可以用transform属性让它沿着Y轴起来，看看是不是3D的。</p>
<pre><code>transform:rotateY(0deg);</code></pre>
<p>这句话表示将div盒子沿着Y轴旋转0度。</p>
<p>让我们用谷歌浏览器打开（或者其他浏览器，不要太老就行），打开调试模式（大部分浏览器都是直接按一下F12就可以了），进入这样的界面。</p>
<p>按一下这里的箭头，就可以查看dom元素了。<br/>
<img src="https://upload-images.jianshu.io/upload_images/1929342-a36b003cb3763a60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>把鼠标滑到div上，点击。<br/>
<img src="https://upload-images.jianshu.io/upload_images/1929342-650a3dea7d064255.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>然后右边就会出来这样的界面，里面有这个div所有的样式。<br/>
<img src="https://upload-images.jianshu.io/upload_images/1929342-11577ad89049d2e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>我们找到 <strong>transform:rotateY(0deg);</strong> 这一行，然后可以动态地改变它的值，我们点几下，选中 <strong>0deg</strong> 这几个字，再按键盘上的向上箭头，就会这样：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-c5df0c819c57dfb0.gif?imageMogr2/auto-orient/strip"/></p>
<p>哇，转起来了，好神奇！</p>
<p>我当初知道有这么个名堂的时候，心里就特别兴奋。</p>
<p>这还是2D的，没有3D效果，如何添加3D效果呢?</p>
<p>我们加上这两个属性，</p>
<pre><code>transform-style:preserve-3d;/*设置3d环境*/
perspective:800px;      /*设置景深为800px*/</code></pre>
<p>所谓的景深， 简单说来，就是对好焦的范围。它能决定是把背景模糊化来突出拍摄对象，还是拍出清晰的背景。我看到网上是这么说的，喜欢摄影的朋友应该很了解。</p>
<p>为了突出效果，我们添加一张图片，顺便给图片加上一点倒影效果。</p>
<pre><code>&lt;div id="photos"&gt;
    &lt;img src="img/1.jpg"  /&gt;
&lt;/div&gt;</code></pre>
<pre><code>#photos img{
    width:100%;
    height:100%;
    position:absolute;
    box-shadow:0 0 8px #eaeaea;
    box-shadow: 1px -1px 6px #666;
    border-radius:4px;
    -webkit-box-reflect:below 3px -webkit-linear-gradient(top,rgba(0,0,0,0) 40%,rgba(0,0,0,0.5));
    cursor:pointer;
}</code></pre>
<p>效果：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-5e0931b306f8043a.gif?imageMogr2/auto-orient/strip"/></p>
<p>看起来有点效果了吧。</p>
<p>我一共准备了8张图片，现在将剩余的图片也添加进来。</p>
<pre><code>&lt;div id="photos"&gt;
    &lt;img src="img/1.jpg"  /&gt;
    &lt;img src="img/2.jpg"  /&gt;
    &lt;img src="img/3.jpg"  /&gt;
    &lt;img src="img/4.jpg"  /&gt;
    &lt;img src="img/5.jpg"  /&gt;
    &lt;img src="img/6.jpg"  /&gt;
    &lt;img src="img/7.jpg"  /&gt;
    &lt;img src="img/8.jpg"  /&gt;
&lt;/div&gt;</code></pre>
<p>到目前为止，所有的图片都是叠在一起的，我们思考如何将他们分散开来，围城一圈呢?</p>
<h1 id="将图片散开围成一圈">4.将图片散开，围成一圈</h1>
<p>在3维坐标中，不仅有X轴，Y轴，还有Z轴。我们首先要明白Z轴是什么概念，Y轴是左右旋转，上面已经演示过了，不难想到X轴应该就是上下旋转，那么Z轴呢？</p>
<p>我们先把倒影去掉，看起来清楚些。</p>
<pre><code>/*-webkit-box-reflect:below 3px -webkit-linear-gradient(top,rgba(0,0,0,0) 40%,rgba(0,0,0,0.5));*/</code></pre>
<p>好，让我们来一探究竟：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-8915deb06fbc4860.gif?imageMogr2/auto-orient/strip"/></p>
<p>哇，原来如此！</p>
<p><strong>Z轴就是垂直于横切面的一条轴！</strong></p>
<p>我们现在不需要绕着Z轴旋转，试试让相册沿着Z轴移动一段距离如何?</p>
<p>translateZ可以帮我们实现这一个效果。</p>
<p>回到正题。</p>
<p>我们的目的是让所有的图片分散开来，那么第一步就是让每一张图片均匀地根据Y轴转过一个角度。这个角度是多少呢？</p>
<p>一圈是360度，除以图片的张数，就是每一张图片转过的角度了。</p>
<p>我们用js来实现：</p>
<pre><code>var photosDom = document.getElementById('photos');
//获取图片数组
var images = photosDom.getElementsByTagName('img'); 
//获取图片数量
var len = images.length;        
//计算每张图片按Y轴旋转的角度 
var deg = Math.floor(360 / len);                    
for(var i = 0; i &lt; len;i++){
    images[i].style = 'transform : rotateY(' + deg * i + 'deg)'; //deg前面不要加空格
}</code></pre>
<p>代码是比较明了的，就是一个除法运算，然后给每一张图片增加一个旋转样式即可。</p>
<p>效果：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-74fda7826592ec5e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>可见，每一张图片都转过了一定的角度。</p>
<p>也就是说，这个时候，每张图片的Z轴都不一样了！</p>
<p>如果你还是觉得有难度，没关系，我们拿其中一张图片来举例，让它沿着它自己的Z轴向外移动。然后你就明白了。</p>
<pre><code>for(var i = 0; i &lt; len;i++){
    images[i].style = 'transform : rotateY(' + deg * i + 'deg)'; //deg前面不要加空格

    if(i == 1){
        images[i].style = 'transform : rotateY(' + deg * i + 'deg) translateZ(300px)';
    }
}</code></pre>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-fe7195380dbce791.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>显而易见了，就是这么回事，那么解决方案自己就出来了，我们只需要在每一张图片根据Y轴旋转的时候，就让它沿着Z轴“飘”出来就可以啦！</p>
<p>距离稍微大一点，就380px吧。</p>
<pre><code>for(var i = 0; i &lt; len;i++){
    images[i].style = 'transform : rotateY(' + deg * i + 'deg) translateZ(380px)'; //deg前面不要加空格
}</code></pre>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-154ec036d43a61c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>这样有点太水平了，我们让整个相册往下一点，达到一种稍微有点俯视的效果。让相册根据X轴往下移动个10px就可以了哦。</p>
<pre><code>transform:rotateX(-10deg);</code></pre>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-a1104fb0691cb804.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<p>这样效果就出来了。</p>
<h1 id="绘制透明酷炫底盘">5.绘制透明酷炫底盘</h1>
<p>本案例中，在相册底部，还有一个透明的底盘，现在我们开始实现这个效果。</p>
<pre><code>&lt;div id="photos"&gt;
    &lt;img src="img/1.jpg"  /&gt;
    &lt;img src="img/2.jpg"  /&gt;
    &lt;img src="img/3.jpg"  /&gt;
    &lt;img src="img/4.jpg"  /&gt;
    &lt;img src="img/5.jpg"  /&gt;
    &lt;img src="img/6.jpg"  /&gt;
    &lt;img src="img/7.jpg"  /&gt;
    &lt;img src="img/8.jpg"  /&gt;
    &lt;div&gt;&lt;/div&gt;
&lt;/div&gt;</code></pre>
<p>其实，它就是一个放在photos里面的div。我们通过定位布局和css3特性就可以实现了。</p>
<p>上代码：</p>
<pre><code>#photos div{
    width:1200px;
    height:1200px;
    border-radius:50%;
    position:absolute;
    top:102%;
    left:50%;
    margin-left:-600px;
    margin-top:-600px;
    transform:rotateX(90deg);
    background:-webkit-radial-gradient(center center,600px 600px,rgba(158,158,222,0.5),rgba(0,0,0,0));
}</code></pre>
<p>top属性是一点点调出来的，你也可以用浏览器的调试模式一点点来调整高度。</p>
<p>效果：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-175c3c923e1d00b1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"/></p>
<h1 id="自动旋转">6.自动旋转</h1>
<p>最后一步，还是由js代码来收尾，我们使用js的定时器setInterval，每隔30毫秒就让整个相册转过一个非常小的角度就行了。</p>
<pre><code>var x = 0;
setInterval(function(){
    photosDom.style.transform = "rotateX(-10deg) rotateY("+ (x++) * 0.2 +"deg)";
},30);</code></pre>
<p>代码应该还是比较明了的。</p>
<p>最终效果就出来了：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/1929342-1567011c241d318b.gif?imageMogr2/auto-orient/strip"/></p>
<p>今天做了一点小修改，我把photos的margin由之前的100px auto变为160px auto了。</p>
<p>从效果来看，相册在旋转的过程中，会有一定的偏移，虽然我个人觉得这样的效果也挺有趣的，不过，如果你不希望它的位置发生偏移的话，只需要在photos外边在逃一层div，然后把景深移到外层div就ok啦。</p>
<p>演示地址：<a class="uri" href="http://s-335245.gotocdn.com/demo.html?path=3d">http://s-335245.gotocdn.com/demo.html?path=3d</a></p>
<p>我的个人博客：www.xiaotublog.com</p>
<p><strong>免责声明</strong>： 博客中所有的图片素材均来自百度搜索，仅供学习交流，如有问题请联系我，侵立删，谢谢。</p>
</div>
</body>
</html>

